{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "execution_record_schema.json",
  "title": "ExecutionRecord",
  "description": "Canonical schema for execution log records",
  "additionalProperties": false,
  "type": "object",
  "required": [
    "id",
    "taskId",
    "result"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^\\d{10}-exec-[a-z0-9-]{1,50}$",
      "maxLength": 70,
      "description": "Unique identifier for the execution log entry",
      "examples": [
        "1752275000-exec-crear-schema-inicial"
      ]
    },
    "taskId": {
      "type": "string",
      "pattern": "^\\d{10}-task-[a-z0-9-]{1,50}$",
      "maxLength": 70,
      "description": "ID of the parent task"
    },
    "type": {
      "type": "string",
      "enum": [
        "analysis",
        "progress",
        "blocker",
        "completion",
        "info",
        "correction"
      ],
      "description": "Semantic classification of the execution event",
      "examples": [
        "progress",
        "analysis",
        "blocker",
        "completion"
      ]
    },
    "title": {
      "type": "string",
      "maxLength": 256,
      "description": "Human-readable title for the execution",
      "examples": [
        "Sub-Task-11",
        "Initial analysis"
      ]
    },
    "result": {
      "type": "string",
      "minLength": 10,
      "maxLength": 22000,
      "description": "The tangible, verifiable output or result of the execution"
    },
    "notes": {
      "type": "string",
      "maxLength": 6500,
      "description": "Optional comments about decisions, blockers or context"
    },
    "references": {
      "type": "array",
      "items": {
        "type": "string",
        "maxLength": 500
      },
      "description": "List of URIs to relevant commits, files, or external documents"
    }
  },
  "examples": [
    {
      "id": "1752642000-exec-subtask-9-4",
      "taskId": "1752274500-task-integrar-adapter-configuracion",
      "type": "progress",
      "title": "Sub-tarea 9.4: Implementar parser de JSON",
      "result": "Adapter implementado y pasando tests",
      "notes": "La implementación inicial usa una librería externa para el parsing.",
      "references": [
        "commit:a1b2c3d4e5"
      ]
    }
  ]
}