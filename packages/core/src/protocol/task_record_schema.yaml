# TaskRecord Schema (Canonical)
# Source: task_protocol.md
# Purpose: AI-first canonical structure for task records
# Version: 1.0.0

$schema: "http://json-schema.org/draft-07/schema#"
$id: "task_record_schema.yaml"
title: "TaskRecord"
description: "Canonical schema for task records as defined in task_protocol.md"
additionalProperties: false
type: object
required:
  - id
  - title
  - status
  - priority
  - description
  - tags
properties:
  id:
    type: string
    pattern: "^\\d{10}-task-[a-z0-9-]{1,50}$"
    maxLength: 70
    description: "Unique identifier for the task"
    examples:
      - "1752274500-task-implementar-auth"
      - "1752347700-task-fix-logging"

  title:
    type: string
    minLength: 3
    maxLength: 150
    description: "A brief, human-readable title for the task. Used to generate the ID slug."

  cycleIds:
    type: array
    items:
      type: string
      pattern: "^\\d{10}-cycle-[a-z0-9-]{1,50}$"
    description: "Optional. The IDs of the strategic cycles this task belongs to."

  status:
    type: string
    enum:
      - draft
      - review
      - ready
      - active
      - done
      - archived
      - paused
      - discarded
    maxLength: 40
    description: "Current state of the task in the institutional flow"

  priority:
    type: string
    enum:
      - low
      - medium
      - high
      - critical
    maxLength: 40
    description: "Strategic or tactical priority level"

  description:
    type: string
    minLength: 10
    maxLength: 22000
    description: "Functional, technical or strategic summary of the objective"

  tags:
    type: array
    items:
      type: string
      pattern: "^[a-z0-9-]+(:[a-z0-9-:]+)*$"
    description: "List of key:value tags for categorization and role suggestion (e.g., 'skill:react', 'role:agent:developer'). Can be an empty array."

  references:
    type: array
    items:
      type: string
      maxLength: 500
    description: "Valid links or files, when mentioned"

  notes:
    type: string
    maxLength: 3000
    description: "Additional comments, decisions made or added context"

examples:
  - id: "1752274500-task-implementar-adapter-github"
    status: "in_progress"
    priority: "high"
    description: "Implementar adapter completo para GitHub Issues como TaskLifecycle Store"
# GitHub Adapter Limits:
# - Total effective limit: ~48,000 chars (including duplication of description)
# - JSON overhead: ~1,000 chars
