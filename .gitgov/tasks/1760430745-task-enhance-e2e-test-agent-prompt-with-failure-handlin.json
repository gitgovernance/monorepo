{
  "header": {
    "version": "1.0",
    "type": "task",
    "payloadChecksum": "55a75e0ecfcf2b2a60012f53e8e93a2824992347dbb67c47779fecadb6132998",
    "signatures": [
      {
        "keyId": "human:camilo",
        "role": "author",
        "notes": "Signature regenerated by lint --fix",
        "signature": "EkCdLw7+fUfzk9v4Pd590dHlNUkzbW7Nm5yWzJv91U0GfJbusS0FhNjMhm5G9e+PoeC+XizzgQkhEaM6z178BQ==",
        "timestamp": 1762658229
      },
      {
        "keyId": "human:camilo-v2",
        "role": "author",
        "notes": "Record signed",
        "signature": "lcHQb78By7TuDiCN1+la//s7u63aFHCbQp+GZNED+HRw4Bxst6wP6MWqXbtDZwV9Tyzq7tF7ZMNAT0ckNCo0CA==",
        "timestamp": 1763344809
      }
    ]
  },
  "payload": {
    "id": "1760430745-task-enhance-e2e-test-agent-prompt-with-failure-handlin",
    "title": "Enhance E2E Test Agent Prompt with Failure Handling & Validation",
    "status": "draft",
    "priority": "high",
    "description": "## Context\\nThe @e2e-test-agent prompt (docs/e2e_test_agent_prompt.md) is functional and tested (v1.6.0 validated on macOS), but lacks critical robustness features for production reliability.\\n\\n## Current Status\\n✅ Working: TIER 1-4 tests (21 commands, 100% coverage)\\n✅ Platform detection: macOS (background+kill) vs Linux (timeout)\\n✅ TUI testing: Dashboard validated with 3s strategy\\n⚠️ Missing: Failure handling, exit code validation, zombie cleanup\\n\\n## Critical Improvements Needed (BLOCKER for prod reliability)\\n\\n### 1. Failure Handling Strategy (~15-20 lines, +0s execution)\\nAdd clear rules for what to do when tests fail:\\n- TIER 1 fails → ❌ ABORT immediately (CLI BROKEN - release blocker)\\n- TIER 2 fails → ⚠️ CONTINUE but mark as DEGRADED\\n- TIER 3 fails → ⚠️ CONTINUE (auxiliary features affected)\\n- TIER 4 fails → ⚠️ CONTINUE (TUI only, not critical)\\n\\n### 2. Zombie Process Cleanup (~8-10 lines, +0s execution)\\nAdd trap handlers to prevent hanging processes:\\n\\nCritical for TIER 4 TUI tests that launch background processes.\\n\\n### 3. Exit Code Validation (~20-25 lines, +2-3s execution)\\nValidate exit codes for all commands:\\n\\n\\n## Important Improvements (High Value)\\n\\n### 4. Negative Testing\\nAdd tests for invalid scenarios:\\n- Commands with invalid flags\\n- Empty/invalid parameters\\n- Operations on non-existent entities\\n- Commands without project initialization\\n\\n### 5. JSON Validation\\nValidate JSON outputs are actually valid:\\n❌ Invalid JSONn\\n\\n### 6. Edge Cases Coverage\\n- Projects without .git/\\n- No write permissions in .gitgov/\\n- Disk full scenarios\\n- Node version incompatibilities\\n\\n## Nice to Have (Future)\\n\\n### 7. Performance Regression Tracking\\nCompare execution times with baseline from previous versions.\\n\\n### 8. Retry Strategy\\nHandle flaky tests (commands that fail intermittently).\\n\\n### 9. Multi-version Testing\\nTest across different Node versions.\\n\\n## Implementation Impact\\n- Lines added: ~45-55 lines (~15% increase)\\n- Execution time: +2-3 seconds (~3% increase)\\n- Robustness gain: +40% more reliable\\n- Complexity: +10% for agent to follow\\n\\n## Success Criteria\\n✅ TIER 1 failures abort the test suite immediately\\n✅ No zombie processes after test completion\\n✅ All exit codes validated and reported\\n✅ Negative test cases covered (at least 5 scenarios)\\n✅ JSON outputs validated with jq\\n✅ Trap handlers prevent process leaks\\n\\n## References\\n- Current prompt: docs/e2e_test_agent_prompt.md (355 lines)\\n- Test validated on: macOS (Darwin), targeting Ubuntu prod\\n- Current coverage: 21 commands (TIER 1-4), ~30s execution",
    "tags": [
      "testing",
      "e2e",
      "cli",
      "quality"
    ],
    "references": [],
    "cycleIds": [
      "1763344784-cycle-tareas-hurfanas-consolidadas"
    ]
  }
}