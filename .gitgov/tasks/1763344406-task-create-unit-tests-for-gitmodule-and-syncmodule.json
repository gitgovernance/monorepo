{
  "header": {
    "version": "1.0",
    "type": "task",
    "payloadChecksum": "b240db6a6108dc28b4b229397c17c09e67d71e6aa89182bc7bbc64fa66bb6ecd",
    "signatures": [
      {
        "keyId": "human:camilo-v2",
        "role": "author",
        "notes": "Record signed",
        "signature": "EHHVpVEE6Y9pEEmQAWamxE3GXySBnfhLnkNOLjqyzTdeY49/cCGqqH62TyJq78XhHYtrsp1ABD6u3+0M0AHbAQ==",
        "timestamp": 1763344406
      },
      {
        "keyId": "human:camilo-v2",
        "role": "author",
        "notes": "Record signed",
        "signature": "xWvOmxCpyzncfpwl52LnyiB7zfFc8bjZuUcov9xL9/TuIiRMEuDgjVUTZcpHhvxczU91QXKTUZCj0VMJbkQhAw==",
        "timestamp": 1763344406
      }
    ]
  },
  "payload": {
    "id": "1763344406-task-create-unit-tests-for-gitmodule-and-syncmodule",
    "title": "Create unit tests for GitModule and SyncModule",
    "status": "draft",
    "priority": "high",
    "description": "Implementar tests completos para todas las operaciones de GitModule y SyncModule con cobertura >80%.\\n\\n## ‚ö†Ô∏è DEPENDENCIAS CR√çTICAS\\n\\n**BLOQUEADA** - Requiere Task 1.0 (GitModule) y Task 1.1 (SyncModule) completados.\\n\\n## Estructura de Tests\\n\\n### GitModule Tests (6 tests)\\n**Archivo**: packages/core/src/modules/git_module/git_module.test.ts\\n\\n- ensureStateBranch() - Caso 1: Repo nuevo sin remote\\n- ensureStateBranch() - Caso 2: Repo con remote, sin branch local\\n- ensureStateBranch() - Caso 3: Repo con branch local, sin remote\\n- ensureStateBranch() - Caso 4: Branch existe completamente\\n- isRebaseInProgress() - Detecta .git/rebase-merge/\\n- isRebaseInProgress() - Retorna false cuando no hay rebase\\n\\n### SyncModule Tests (22 tests)\\n**Archivo**: packages/core/src/modules/sync_module/sync_module.test.ts\\n\\n- pushState() - 8 tests (happy path, retry, rollback, integrity check)\\n- pullState() - 6 tests (happy path, conflicts, re-indexing)\\n- verifyIntegrity() - 4 tests (checksums, signatures, resoluciones)\\n- auditState() - 4 tests (audit completo, parcial, corrupciones)\\n\\n### Config Schema Tests (5 tests)\\n**Archivo**: packages/core/src/modules/sync/sync_config_schema.test.ts\\n\\n- Validaci√≥n de strategy enum\\n- Validaci√≥n de rangos (maxRetries 1-10)\\n- Defaults aplicados correctamente\\n- Edge cases (valores inv√°lidos)\\n- Performance (<1ms gracias a cache)\\n\\n## Referencias\\n\\n- git_module.test.ts - Tests GitModule\\n- sync_module.test.ts - Tests SyncModule\\n- sync_config_schema.test.ts - Tests de validaci√≥n\\n- test_specifications.md - Test specifications completas\\n\\n## üí° Setup de Tests\\n\\nUsar mocks para:\\n- Git commands (simple-git)\\n- FileSystem operations\\n- EventBus\\n- ConfigManager\\n\\nNO mockear:\\n- L√≥gica de negocio\\n- Validaciones\\n- Transformaciones de datos\\n\\n## üéØ Coverage Target\\n\\n- **GitModule**: >80% statement coverage\\n- **SyncModule**: >85% statement coverage  \\n- **Config Validators**: 100% coverage (funciones simples)\\n\\n## ‚úÖ Criterios de Aceptaci√≥n\\n\\n- [ ] 33 tests totales pasan (6 Git + 22 Sync + 5 Config)\\n- [ ] Coverage >80% en ambos m√≥dulos\\n- [ ] Tests unitarios r√°pidos (<100ms por test)\\n- [ ] Mocks bien configurados\\n- [ ] No flaky tests\\n- [ ] CI/CD verde\\n\\n## Tags\\n\\nskill:jest, skill:testing, skill:mocking",
    "tags": [
      "category:testing",
      "cycle:01",
      "package:core",
      "skill:jest"
    ],
    "cycleIds": [
      "1763344330-cycle-cycle-1-syncmodule-basic---manual-sync"
    ],
    "references": [
      "file:packages/core/src/modules/git_module/git_module.test.ts",
      "file:packages/core/src/modules/sync_module/sync_module.test.ts",
      "file:packages/core/src/modules/sync/sync_config_schema.test.ts",
      "file:packages/blueprints/03_products/epics/collaboration_system/test_specifications.md"
    ]
  }
}