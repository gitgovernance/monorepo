{
  "header": {
    "version": "1.0",
    "type": "task",
    "payloadChecksum": "ad89f755703b4a729fb5a532dbbae7608be99feaf0a2904f43aa8f6424b7a850",
    "signatures": [
      {
        "keyId": "human:camilo",
        "role": "author",
        "notes": "Signature regenerated by lint --fix",
        "signature": "omhKsO7PgDVu2wYxIHWxJn1y8fzWZSBwk/5nvuTdtI5f75NLh7ULMsr78JNy2aUZSv9k2cMp6J+FKyLwPrh7AA==",
        "timestamp": 1762658229
      },
      {
        "keyId": "human:camilo-v2",
        "role": "author",
        "notes": "Record signed",
        "signature": "tz67b8ke2UtMbZFkvN3udhxVYXMmSOpHCEgzPlpSKyAVfgF2+4imeFnNRhGmhpxtB1jyw7e15X1fy2PTP2BfBg==",
        "timestamp": 1763344809
      }
    ]
  },
  "payload": {
    "id": "1761603579-task-implementar-cli-commands-del-feedback-protocol-5-c",
    "title": "Implement CLI Commands for Feedback Protocol (5 commands)",
    "status": "draft",
    "priority": "medium",
    "description": "# Implementar CLI Commands del Feedback Protocol\n\n## Contexto\n\nEl `FeedbackAdapter` core está completo (6/6 métodos, patrón inmutable). El blueprint `feedback_command.md` está completamente documentado con 5 comandos y 20 EARS, pero **ningún comando CLI está implementado** aún.\n\n## Problema\n\nLos comandos `gitgov feedback` no existen. El sistema depende de que los usuarios usen el adapter programáticamente o vía `gitgov task assign` (que usa el adapter internamente).\n\n**Impacto:**\n- No hay forma de crear feedback blocking desde CLI\n- No hay forma de crear feedback question desde CLI\n- No hay forma de ver threads de conversación\n- Workflow de comunicación estructurada está incompleto\n\n## Solución\n\nImplementar los 5 comandos CLI documentados en `feedback_command.md`:\n\n### 1. `gitgov feedback create`\n\n**Archivo:** `packages/cli/src/commands/feedback/create.ts`\n\n**Funcionalidad:**\n- Validar entity existe\n- Crear FeedbackRecord vía FeedbackAdapter\n- Emitir evento para side effects\n- Output formateado (no-json mode)\n\n**EARS CLI:** EARS-1 a EARS-6 (validation, entity checking, defaults)\n\n### 2. `gitgov feedback list`\n\n**Archivo:** `packages/cli/src/commands/feedback/list.ts`\n\n**Funcionalidad:**\n- Auto-indexation\n- Filtrado por status, entity, assignee, type\n- Default: excluir resolved\n- Output table/JSON\n\n**EARS CLI:** EARS-10 a EARS-15 (filtros, defaults)\n\n### 3. `gitgov feedback show`\n\n**Archivo:** `packages/cli/src/commands/feedback/show.ts`\n\n**Funcionalidad:**\n- Mostrar feedback completo\n- Opción --context (entity context)\n- Opción --thread (conversation tree)\n- Opción --signatures\n\n**EARS CLI:** EARS-16 a EARS-18 (show, context, thread)\n\n### 4. `gitgov feedback reply`\n\n**Archivo:** `packages/cli/src/commands/feedback/reply.ts`\n\n**Funcionalidad:**\n- Helper UX para responder\n- Delega a create() internamente\n- Defaults: type=clarification, status=resolved\n\n**EARS CLI:** EARS-7 a EARS-9 (reply helper, defaults)\n\n### 5. `gitgov feedback thread`\n\n**Archivo:** `packages/cli/src/commands/feedback/thread.ts`\n\n**Funcionalidad:**\n- Construir árbol de conversación\n- Opción --depth\n- Renderizar thread visualmente\n- Output JSON\n\n**EARS CLI:** EARS-19, EARS-20 (thread building, depth limit)\n\n## Dependencias\n\n**Adapters requeridos:**\n- ✅ FeedbackAdapter (implementado)\n- ✅ BacklogAdapter (para validar entities)\n- ✅ IdentityAdapter (para getCurrentActor)\n- ✅ IndexerAdapter (para auto-indexation)\n\n**Patrones a seguir:**\n- Similar a `task_command.ts` (ya implementado)\n- Similar a `cycle_command.ts` (ya implementado)\n- Auto-indexation en comandos de lectura\n- Invalidate cache en comandos de escritura\n\n## Referencias\n\n**Blueprint completo:**\n- `packages/blueprints/03_products/cli/specs/feedback_command.md` (821 líneas)\n- Flags detallados, ejemplos, EARS, planning brief\n\n**Adapters:**\n- `packages/core/src/adapters/feedback_adapter/index.ts`\n- `packages/blueprints/03_products/core/specs/adapters/feedback_adapter.md`\n\n## Criterios de Aceptación\n\n1. ✅ 5 comandos implementados y funcionando\n2. ✅ 20 EARS CLI cubiertos con E2E tests\n3. ✅ Auto-indexation funcionando en list/show/thread\n4. ✅ Side effects automáticos (blocking → pause task)\n5. ✅ Output formateado (table + JSON modes)\n6. ✅ Help text completo para cada comando\n7. ✅ Integración con adapter core sin errores\n\n## Estimación\n\n**Complejidad:** Alta (5 comandos + 20 EARS + side effects)\n**Tiempo estimado:** 1-2 semanas\n**Prioridad:** Medium (adapter funciona programáticamente)\n**Bloqueado por:** Task 1761603296 (EARS-36) debe completarse primero\n**Tags:** `cli`, `feedback-commands`, `user-experience`",
    "tags": [
      "cli",
      "feedback-commands",
      "user-experience"
    ],
    "references": [],
    "cycleIds": [
      "1763344784-cycle-tareas-hurfanas-consolidadas"
    ]
  }
}