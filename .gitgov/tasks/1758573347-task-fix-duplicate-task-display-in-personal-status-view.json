{
  "header": {
    "version": "1.0",
    "type": "task",
    "payloadChecksum": "5c6079bc6f892eee93c9b8f72ca933bd2b9bcee8702e595bda93e5e0213460bf",
    "signatures": [
      {
        "keyId": "human:camilo",
        "role": "author",
        "notes": "Signature regenerated by lint --fix",
        "signature": "5juZWGbLVSDqJgVjkhdFE+DDz45oUZT/T382/sYcfz35JnQTVJsdWb8WsHgdb2DIPka1dXxkWwNTUQ0c8/yWAQ==",
        "timestamp": 1762658229
      }
    ]
  },
  "payload": {
    "id": "1758573347-task-fix-duplicate-task-display-in-personal-status-view",
    "title": "Fix status command duplicate display",
    "status": "done",
    "priority": "medium",
    "description": "**BUG FIX**: Personal status view (`gitgov status`) shows duplicate tasks while global view (`gitgov status --all`) works correctly.\n\n## ğŸ› Problem Description\n\nThe personal status view displays the same task multiple times:\n```\nâœ… Mi Trabajo (2 tasks)\n  âš¡ [active] 1758544872-task-complete-vim-style-navigation-in-dashboard-tui - Add task selection to dashboard ğŸŸ¡\n  âš¡ [active] 1758544872-task-complete-vim-style-navigation-in-dashboard-tui - Add task selection to dashboard ğŸŸ¡\n```\n\nHowever, only 1 task actually exists (confirmed via `gitgov task list --status active --json`).\n\n## ğŸ” Investigation Results\n\n- âœ… **No real duplication**: Only 1 task exists with that ID\n- âœ… **Cache is valid**: `gitgov indexer --validate-only` passes\n- âœ… **Global view works**: `gitgov status --all` shows correct count\n- âŒ **Personal view has bug**: Shows same task multiple times\n\n## ğŸ¯ Root Cause Analysis\n\n**Suspected Location**: `packages/cli/src/commands/status/status-command.ts`\n**Suspected Issue**: Personal task filtering logic duplicates tasks when:\n- Multiple FeedbackRecords exist for the same task assignment\n- Task filtering doesn't deduplicate properly\n- Rendering logic processes the same task multiple times\n\n## ğŸ“‹ Implementation Requirements\n\n### **COMPONENT 1: Investigate Personal Task Filtering**\n\nExamine the personal status logic:\n```typescript\n// In StatusCommand, find the personal task filtering\n// Look for logic that filters tasks assigned to current actor\n// Check if it's creating duplicates from multiple assignments\n```\n\n### **COMPONENT 2: Fix Duplication Logic**\n\nAdd deduplication to personal task filtering:\n```typescript\n// Ensure tasks are deduplicated by ID before display\nconst uniqueTasks = tasks.filter((task, index, self) => \n  index === self.findIndex(t => t.id === task.id)\n);\n```\n\n### **COMPONENT 3: Verify Assignment Logic**\n\nCheck FeedbackRecord processing:\n- Multiple assignment FeedbackRecords for same task shouldn't duplicate display\n- Task should appear once regardless of assignment history\n\n## ğŸ§ª Testing Requirements\n\n### **Manual Testing**\n1. **Create task with multiple assignments**\n2. **Run `gitgov status`** â†’ Should show task only once\n3. **Run `gitgov status --all`** â†’ Should match personal count\n4. **Verify with JSON output** â†’ Confirm no duplication\n\n### **Edge Cases**\n- Task with multiple assignment FeedbackRecords\n- Task assigned and reassigned to same actor\n- Task with mixed assignment types\n\n## ğŸ“ Files to Investigate\n\n1. **`packages/cli/src/commands/status/status-command.ts`**\n   - Personal task filtering logic\n   - FeedbackRecord processing for assignments\n\n2. **Related StatusAdapter methods**\n   - Task filtering by actor\n   - Assignment processing logic\n\n## ğŸ¯ Acceptance Criteria\n\n1. âœ… **No Duplication**: Personal status shows each task only once\n2. âœ… **Consistent Counts**: Personal and global views show same task counts\n3. âœ… **Assignment Logic**: Multiple assignments don't cause duplication\n4. âœ… **Performance**: Fix doesn't impact status command performance\n\n## ğŸš¨ Priority: Medium\n\nThis is a visual bug that doesn't affect functionality but impacts user experience and trust in the system.",
    "tags": [
      "bug",
      "status",
      "cli",
      "deduplication",
      "personal-view"
    ],
    "cycleIds": [
      "1758522834-cycle-week-2-sep-29-30"
    ],
    "references": [
      "pr:https://github.com/gitgovernance/monorepo/pull/37",
      "pr:https://github.com/gitgovernance/monorepo/pull/38",
      "release:cli-v1.7.1",
      "release:core-v1.3.0"
    ]
  }
}